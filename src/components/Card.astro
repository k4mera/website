---
interface MediaItem {
  src: string;
  isVideo?: boolean;
}

interface Props {
  sources: MediaItem[];
  title: string;
  description: string;
}

const { sources, title, description } = Astro.props;
const cardId = `card-${Math.random().toString(36).slice(2, 9)}`;
---

<div
  class="flex-1 flex flex-col items-center p-0 box-border rounded border-2 border-custom-black text-base"
>
  <div class="relative w-full" data-card-gallery={cardId}>
    {
      sources.map((item, index) => (
        <div
          class={`card-slide ${index === 0 ? "" : "hidden"}`}
          data-slide-index={index}
        >
          {item.isVideo ? (
            <video
              src={item.src}
              autoplay
              muted
              loop
              playsinline
              class="w-full h-auto object-cover cursor-default p-1"
            />
          ) : (
            <img
              src={item.src}
              alt={`${title} - ${index + 1}`}
              class="w-full h-auto object-cover cursor-default"
            />
          )}
        </div>
      ))
    }
  </div>

  <h3 class="font-aileron-regular mb-1 text-xl mt-2">{title}</h3>
  <p class="text-sm font-inter px-3 pb-1">{description}</p>
</div>
