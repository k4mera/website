---
import BaseLayout from "../layouts/BaseLayout.astro";
import Card from "../components/Card.astro";
import MediaCarousel from "../components/MediaCarousel.astro";
import MultiGif from "../components/MultiGif.astro";
import InfiniteInstagramPostScroll from "../components/InfiniteInstagramPostScroll.astro";
import LearnMoreDialog from "../components/LearnMoreDialog.astro";
import { Content as Specifications } from "../content/specifications.md";
import { Content as MoreThanWigglegrams } from "../content/more-than-wigglegrams.md";
import { Content as LearnMoreApp } from "../content/learn-more-app.md";
import { Content as About } from "../content/about.md";
import AutoeditAnimation from "../components/AutoeditAnimation.astro";
---

<BaseLayout title="K4MERA" nav="/faq">
  <div class="w-full flex flex-col items-center">
    <!-- Hero -->
    <div
      class="flex flex-col items-center justify-center text-center min-h-screen max-w-5xl"
    >
      <div class="text-center">
        <h1
          class="font-aileron-bold text-8xl inline-block cursor-default select-none"
        >
          K4MERA
        </h1>
        <p class="text-base mb-4 font-inter cursor-default">
          The first digital wigglegram camera. Bring your pictures to life!
        </p>
      </div>
      <!-- Desktop: 3 GIFs side by side -->
      <div class="hidden md:flex gap-4 mb-4">
        <img
          src="assets/images/gif-3.gif"
          alt="Wigglegram"
          class="h-96 w-auto object-cover"
        />
        <img
          src="assets/images/gif-4.gif"
          alt="Wigglegram"
          class="h-96 w-auto object-cover"
        />
        <img
          src="assets/images/gif-5.gif"
          alt="Wigglegram"
          class="h-96 w-auto object-cover"
        />
      </div>
      <!-- Mobile: MultiGif rotating -->
      <div class="md:hidden">
        <MultiGif
          sources={[
            "assets/images/gif-3.gif",
            "assets/images/gif-4.gif",
            "assets/images/gif-5.gif",
          ]}
        />
      </div>
      <div class="flex flex-col mt-2 gap-2">
        <a
          href="https://form.typeform.com/to/kRmB5TdA"
          target="_blank"
          class="px-3 py-2 bg-custom-black text-custom-white rounded-lg font-inter bg-accent-blue hover:opacity-75 transition-opacity preorder"
        >
          Join waitlist
        </a>
        <button
          onclick="document.getElementById('body-3').scrollIntoView({behavior:'smooth'})"
          class="text-custom-black hover:underline hover-accent-blue font-inter"
        >
          Learn more
        </button>
      </div>
      <div
        onclick="document.getElementById('body-2').scrollIntoView({behavior:'smooth'})"
        class="mt-6 text-2xl text-custom-black animate-bounce cursor-pointer hover:opacity-75"
      >
        â†“
      </div>
    </div>

    <!-- Video -->
    <div
      class="flex flex-col items-center justify-center text-center min-h-screen max-w-5xl"
    >
    </div>

    <!-- INTERLUDE -->
    <div class="flex justify-center items-center min-h-[50vh]">
      <img
        src="assets/images/k4-4.png"
        alt="K4MERA Render"
        class="w-64 h-auto interlude cursor-default"
      />
    </div>
    <!-- Body 3: Cards -->
    <div
      class="flex flex-col items-center justify-center max-w-5xl min-h-screen"
      id="body-3"
    >
      <h2 class="text-center text-3xl md:text-4xl font-aileron-regular mb-6">
        Built for creatives and creators
      </h2>
      <div class="flex items-center gap-4 w-full mx-auto" id="card-container">
        <Card
          title="Shoot in 3D..."
          description="...think in 4D! K4MERA is the first digital stereo-camera designed to capture authentic wigglegrams. With built-in depth processing and no post-production needed, every moment loops back to life. No film rolls, no Photoshop, no mimics."
        >
          <MediaCarousel
            sources={[{ src: "/assets/images/k4-1.mp4", isVideo: true }]}
            alt="K4MERA camera"
          />
          <LearnMoreDialog slot="cta" buttonText="Specifications">
            <div class="prose prose-sm">
              <Specifications />
            </div>
          </LearnMoreDialog>
        </Card>
        <Card
          title="Instant wigglegrams"
          description="K4MERA runs a built-in image processing pipeline that aligns all four shots and builds your wigglegrams in seconds. Want full control? The original images are always saved, ready for manual tweaking and custom workflows. But there's more..."
        >
          <AutoeditAnimation />
          <LearnMoreDialog slot="cta" buttonText="More than wigglegrams">
            <div class="prose prose-sm">
              <MoreThanWigglegrams />
            </div>
          </LearnMoreDialog>
        </Card>
        <Card
          title="Companion app"
          description="K4MERA isn't just about the capture. Our companion app gives you everything you need after the click: instantly preview your 3D shots, fine-tune the motion, and export perfect wigglegrams. Easy and ready to share in just a few taps."
        >
          <MediaCarousel
            sources={[
              { src: "/assets/images/app-1.png" },
              { src: "/assets/images/app-2.png" },
            ]}
            alt="K4MERA companion app"
          />
          <LearnMoreDialog slot="cta" buttonText="Learn more">
            <div class="prose prose-sm">
              <LearnMoreApp />
            </div>
          </LearnMoreDialog>
        </Card>
      </div>
    </div>

    <!-- LOGOS -->
    <div
      class="flex flex-col items-center justify-center w-full mt-32 min-h-screen"
    >
      <h2 class="text-center text-3xl md:text-4xl font-aileron-regular mb-6">
        Already in the wild
      </h2>
      <InfiniteInstagramPostScroll
        posts={[
          {
            image: "/assets/posts/tataki.gif",
            link: "https://www.instagram.com/p/DLNSROGoubg/?img_index=8",
            profileImage: "assets/posts/tataki.jpg",
            username: "ta_ta_ki",
            caption: `
                ðŸ“¸ 3D 
                <a
                  href="https://www.instagram.com/k4.mera/"
                  target="_blank"
                  class="accent-blue"
                >
                  @k4.mera
                </a>
            `,
          },
          {
            image: "/assets/posts/strangetree.gif",
            link: "https://www.instagram.com/p/DJTwH7hMqWU",
            profileImage: "/assets/posts/strangetree.jpg",
            username: "strangetree.fam",
            caption: `
                Ps: we used a new camera by 
                <a
                  href="https://www.instagram.com/k4.mera/"
                  target="_blank"
                  class="accent-blue"
                >
                  @k4.mera
                </a>
                 to take some new shot, what do you think?
            `,
          },
        ]}
      />
    </div>

    <!-- TEAM -->
    <div class="flex flex-col justify-center items-center interlude mb-24 mt-8">
      <h2 class="text-center text-2xl font-aileron-regular mb-2">
        Say cheeeeeeeeeeeeeeeeeeeeeeeese!
      </h2>
      <img
        src="/assets/images/team.jpg"
        alt="Team"
        class="p-1 cursor-default h-96 w-auto mb-2"
      />

      <div class="text-base mb-1 font-inter text-center max-w-lg">
        <About />
      </div>
    </div>

    <!-- WAITLIST -->
    <!-- BODY 4: Waitlist -->
    <div
      class="flex flex-col items-center justify-center w-full min-h-[70vh]"
      id="waitlist"
    >
      <h2 class="font-aileron-regular text-3xl md:text-4xl mt-0 inline-block">
        Still building<span
          id="loading-dots"
          class="inline-block w-[1.5ch] text-left"></span>
      </h2>
      <script>
        const dots = document.getElementById("loading-dots");
        if (dots) {
          const delays = [100, 100, 100, 100, 1000]; // pause at empty, then quick dots
          let count = 0;
          const animate = () => {
            dots.textContent = ".".repeat(count);
            const delay = delays[count];
            count = (count + 1) % 5;
            setTimeout(animate, delay);
          };
          animate();
        }
      </script>
      <img
        src="assets/images/k4-0.png"
        alt="K4MERA Render"
        class="w-64 h-auto cursor-default m-2"
      />
      <p class="text-base font-inter text-center max-w-lg mb-2">
        K4MERA is still under construction, and we're working on a brand new
        design. Join our waitlist to be the first to hear when it's ready for
        pre-order and try exclusive features.
      </p>
      <a
        href="https://form.typeform.com/to/kRmB5TdA"
        target="_blank"
        class="px-3 py-2 bg-custom-black text-custom-white rounded-lg font-inter bg-accent-blue hover:opacity-75 transition-opacity mb-8 preorder"
      >
        Join waitlist
      </a>
    </div>
  </div>
</BaseLayout>
